(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{FhP4:function(e,t,n){e.exports={normal:"normal___3tC1u",welcome:"welcome___5teKL",list:"list___1Mg1A"}},ROtW:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),s=n("FhP4"),u=n.n(s),o=n("d6i3"),i=n.n(o),c=n("1l/V"),l=n.n(c),p=n("iqUP"),h=n.n(p),d=n("3p6W"),m=n.n(d),f={apiKey:"AIzaSyBa4LhzHpTWnssn2_GhOM4SBhuTkBj_5qY",authDomain:"jiker-keju.firebaseapp.com",databaseURL:"https://jiker-keju.firebaseio.com",projectId:"jiker-keju",storageBucket:"jiker-keju.appspot.com",messagingSenderId:"163275740455",appId:"1:163275740455:web:60b499e10edde65ac00502"};h.a.initializeApp(f);var g=h.a.database();function k(e,t){g.ref("users/"+e).set({accessToken:t})}var v=n("oODX"),w=(n("1p3Y"),function(){var e=l()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["request"])("GET /user/repos",{headers:{authorization:"token ".concat(t)},type:"private"});case 2:return n=e.sent,console.log("".concat(n.data.length," repos found."),n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());class b extends r.a.Component{constructor(){var e;super(...arguments),e=this,this.state={isSignedIn:!1,user:{repos:[]}},this.uiConfig={signInFlow:"popup",signInOptions:[{provider:h.a.auth.GithubAuthProvider.PROVIDER_ID,scopes:["repo"]}],callbacks:{signInSuccessWithAuthResult:function(){var t=l()(i.a.mark(function t(n,a){var r,s;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=n.credential.accessToken,k(n.user.uid,r),console.log("authResult accessToken",r),t.next=5,w(r);case 5:return s=t.sent,e.setState({user:{repos:s}}),t.abrupt("return",!1);case 8:case"end":return t.stop()}},t)}));function n(e,n){return t.apply(this,arguments)}return n}()}}}componentDidMount(){this.unregisterAuthObserver=h.a.auth().onAuthStateChanged(e=>{console.log("user",e),this.setState({isSignedIn:!!e}),e&&e.getIdToken().then(function(){var t=l()(i.a.mark(function t(n){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("user.getIdToken() accessToken",n),k(e.uid,n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())})}componentWillUnmount(){this.unregisterAuthObserver()}render(){var e=this.state,t=e.isSignedIn,n=e.user;if(!t)return r.a.createElement("div",null,r.a.createElement("h1",null,"My App"),r.a.createElement("p",null,"Please sign-in:"),r.a.createElement(m.a,{uiConfig:this.uiConfig,firebaseAuth:h.a.auth()}));var a=h.a.auth().currentUser;return console.log("currentUser",a),console.log("firebase.auth()",h.a.auth()),r.a.createElement("div",null,r.a.createElement("h1",null,"My App"),r.a.createElement("p",null,"Welcome ",a.displayName,"! You are now signed-in!"),n.repos&&r.a.createElement("ul",null,n.repos.map(e=>r.a.createElement("li",null,r.a.createElement("a",{href:e.html_url},"".concat(e.full_name," | ").concat(e.description))))),r.a.createElement("button",{onClick:()=>h.a.auth().signOut()},"Sign-out"))}}t["default"]=function(){return r.a.createElement("div",{className:u.a.normal},r.a.createElement(b,null))}}}]);